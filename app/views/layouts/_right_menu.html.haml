%ul.nav.navbar-nav.navbar-right
  - if user_signed_in?
    %li.dropdown
      - if current_page?(notifications_friend_requests_path) || current_page?(my_profile_path)
        %a.active.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
          .gravatar
            = image_tag current_user.gravatar_url
            %span.caret
      - else
        %a.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
          .gravatar
            = image_tag current_user.gravatar_url
            %span.caret
      %ul.dropdown-menu{:role => "menu"}
        %li= link_to 'Private messages', message_box_path
        - if current_page? notifications_friend_requests_path
          %li= link_to 'Friend requests', notifications_friend_requests_path, class: 'active'
        - else
          %li= link_to 'Friend requests', notifications_friend_requests_path
        %li.divider
        %li= link_to 'My public profile', profile_path(current_user)
        - if current_page? my_profile_path
          %li= link_to 'Account details', my_profile_path, class: 'active'
        - else
          %li= link_to 'Account details', my_profile_path
        %li.divider
        %li= link_to 'Log out', destroy_user_session_path, :method=>'delete'
  - elsif admin_signed_in?
    %li= link_to 'Admin panel', admin_panel_root_path
    %li= link_to 'Logout', destroy_admin_session_path, :method=>'delete'
  - else
    - if current_page? new_user_session_path
      %li= link_to 'Log in', new_user_session_path, class: 'active'
    - else
      %li= link_to 'Log in', new_user_session_path
    - if current_page? new_user_registration_path
      %li= link_to 'Sign up', new_user_registration_path, class: 'active'
    - else
      %li= link_to 'Sign up', new_user_registration_path